!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";var a=wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",viewBox:"0 0 20 20"},wp.element.createElement("path",{d:"M18.9,1.1V18.9H1.1V1.1H18.9M20,0H0V20H20V0Z"}),wp.element.createElement("rect",{width:"20",height:"9"}),wp.element.createElement("rect",{x:"3",y:"11",width:"11",height:"2"}),wp.element.createElement("rect",{x:"3",y:"15",width:"14",height:"2"}));t.a=a},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return m});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=wp.i18n.__,s=wp.element.Component,c=wp,p=c.apiFetch,u=wp.components.Dashicon,d={},m=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selected_campaigns:e.selected_campaigns||[]},n}return i(t,e),o(t,[{key:"addOrRemoveCampaign",value:function(e){var t=this.state.selected_campaigns;t.includes(e)?t=t.filter(function(t){return t!==e}):this.props.multiple?t.push(e):t=[e],this.setState({selected_campaigns:t}),this.props.update_campaign_setting_callback(t)}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.columns,a=e.campaign_active_status,r=t?wp.element.createElement("label",null,t):null;return wp.element.createElement("div",{className:"charitable-campaigns-field"},r,wp.element.createElement(h,{add_or_remove_campaign_callback:this.addOrRemoveCampaign.bind(this),selected_campaigns:this.state.selected_campaigns,campaign_active_status:a}),wp.element.createElement(y,{selected_campaigns:this.state.selected_campaigns,add_or_remove_campaign_callback:this.addOrRemoveCampaign.bind(this),columns:n,campaign_active_status:a}))}}]),t}(s),h=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={search_text:"",dropdown_open:!1},n.handleKeyDown=n.handleKeyDown.bind(n),n.updateSearchResults=n.updateSearchResults.bind(n),n.isDropdownOpen=n.isDropdownOpen.bind(n),n}return i(t,e),o(t,[{key:"isDropdownOpen",value:function(e){this.setState({dropdown_open:!!e})}},{key:"updateSearchResults",value:function(e){this.setState({search_text:e.target.value})}},{key:"handleKeyDown",value:function(e){"ArrowDown"===e.key&&e.stopPropagation()}},{key:"render",value:function(){var e="charitable-campaigns-list-card__search-wrapper";return wp.element.createElement("div",{className:e+(this.state.dropdown_open?" "+e+"--with-results":"")},wp.element.createElement("div",{className:"charitable-campaigns-list-card__input-wrapper"},wp.element.createElement(u,{icon:"search"}),wp.element.createElement("input",{type:"search",className:"charitable-campaigns-list-card__search",value:this.state.search_text,placeholder:l("Search for campaigns to display","charitable"),tabIndex:"0",onKeyDown:this.handleKeyDown,onChange:this.updateSearchResults})),wp.element.createElement(f,{search_string:this.state.search_text,add_or_remove_campaign_callback:this.props.add_or_remove_campaign_callback,selected_campaigns:this.props.selected_campaigns,is_dropdown_open_callback:this.isDropdownOpen,campaign_active_status:this.props.campaign_active_status}))}}]),t}(s),f=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={filtered:[],campaign_count:null,campaigns:[],query:"",loaded:!1,controllers:[]},n.getQuery=n.getQuery.bind(n),n.updateResults=n.updateResults.bind(n),n}return i(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this;wp.apiFetch({path:"/wp/v2/campaigns?_embed&per_page=100&active_status="+this.props.campaign_active_status,parse:!1}).then(function(t){t.json().then(function(n){e.setState({campaigns:n,loaded:!0,campaign_count:t.headers.get("X-WP-Total")}),e.updateResults()})})}},{key:"componentDidUpdate",value:function(){this.props.search_string!==this.state.query&&this.updateResults()}},{key:"getQuery",value:function(){return this.props.search_string.length?"/wp/v2/campaigns?_embed&per_page=10&search="+this.props.search_string:""}},{key:"updateResults",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.state.loaded){if(e<25)return e+=1,window.setTimeout(this.updateResults,500,e);this.setState({loaded:!0})}var t=this.props.search_string,n=t.toLowerCase(),a=this.state.campaigns.filter(function(e){return e.title.rendered.toLowerCase().includes(n)});this.setState({query:t,filtered:a})}},{key:"render",value:function(){if(!this.state.loaded||!this.state.query.length)return null;if(0===this.state.filtered.length)return wp.element.createElement("span",{className:"charitable-campaign-list-card__search-no-results"}," ",l("No campaigns found")," ");var e=!0,t=!1,n=void 0;try{for(var a,r=this.state.filtered[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var i=a.value;d[i.id]=i}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}return wp.element.createElement(b,{campaigns:this.state.filtered,add_or_remove_campaign_callback:this.props.add_or_remove_campaign_callback,selected_campaigns:this.props.selected_campaigns,is_dropdown_open_callback:this.props.is_dropdown_open_callback})}}]),t}(s),b=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),o(t,[{key:"componentDidMount",value:function(){this.props.is_dropdown_open_callback(!0)}},{key:"componentDidUnmount",value:function(){this.props.is_dropdown_open_callback(!1)}},{key:"render",value:function(){var e=this.props,t=e.campaigns,n=e.add_or_remove_campaign_callback,a=e.selected_campaigns,r=[],i=0,o=!0,s=!1,c=void 0;try{for(var p,u=t[Symbol.iterator]();!(o=(p=u.next()).done);o=!0){var d=p.value;r.push(wp.element.createElement(g,{key:"campaign-search-result-"+i,campaign:d,add_or_remove_campaign_callback:n,selected:a.includes(d.id)})),i+=1}}catch(e){s=!0,c=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw c}}return wp.element.createElement("div",{role:"menu",className:"charitable-campaigns-list-card__search-results","aria-orientation":"vertical","aria-label":l("Campaign list","charitable")},wp.element.createElement("div",null,r))}}]),t}(s),g=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=n.handleClick.bind(n),n}return i(t,e),o(t,[{key:"handleClick",value:function(){this.props.add_or_remove_campaign_callback(this.props.campaign.id)}},{key:"render",value:function(){var e=this,t=this.props.campaign,n=this.props.selected?wp.element.createElement(u,{icon:"yes"}):null,a=function(e){return e.hasOwnProperty("_embedded")&&e._embedded.hasOwnProperty("wp:featuredmedia")};return wp.element.createElement("div",{className:function(t){var n="charitable-campaigns-list-card__content";return e.props.selected&&(n+=" charitable-campaigns-list-card__content--added"),a(t)&&(n+=" charitable-campaigns-list-card__content--has-thumbnail"),n}(t),onClick:this.handleClick,key:this.props.key},function(e){return a(e)?wp.element.createElement("img",{src:e._embedded["wp:featuredmedia"][0].media_details.sizes.thumbnail.source_url,width:"30",height:"30"}):""}(t),wp.element.createElement("span",{className:"charitable-campaigns-list-card__content-item-name"},t.title.rendered),n)}}]),t}(s),y=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={query:"",loaded:!1},n.getQuery=n.getQuery.bind(n),n.updateCampaignCache=n.updateCampaignCache.bind(n),n}return i(t,e),o(t,[{key:"componentDidMount",value:function(){this.updateCampaignCache()}},{key:"componentDidUpdate",value:function(){this.state.loaded&&this.getQuery()!==this.state.query&&this.updateCampaignCache()}},{key:"getQuery",value:function(){if(!this.props.selected_campaigns.length)return"";var e=[],t=!0,n=!1,a=void 0;try{for(var r,i=this.props.selected_campaigns[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;d.hasOwnProperty(o)||e.push(o)}}catch(e){n=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw a}}return e.length?"/wp/v2/campaigns?_embed&include="+e.join(","):""}},{key:"updateCampaignCache",value:function(){var e=this,t=this.getQuery();e.setState({query:t,loaded:!1}),t.length&&p({path:t}).then(function(t){if(t.length){var n=!0,a=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value;d[l.id]=l}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}e.setState({loaded:!0})})}},{key:"render",value:function(){var e=this,t=[],n=function(e){return e.hasOwnProperty("_embedded")&&e._embedded.hasOwnProperty("wp:featuredmedia")?wp.element.createElement("img",{src:e._embedded["wp:featuredmedia"][0].source_url}):""},a=!0,r=!1,i=void 0;try{for(var o,s=this.props.selected_campaigns[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value;(function(a){if(!d.hasOwnProperty(a))return"continue";var r=d[a];t.push(wp.element.createElement("li",{className:"charitable-campaigns-list-card__item campaign",key:r.id+"-specific-select-edit"},wp.element.createElement("div",{className:"charitable-campaigns-list-card__content"},n(r),wp.element.createElement("span",{className:"charitable-campaigns-list-card__content-item-name"},r.title.rendered),wp.element.createElement("button",{type:"button",id:"campaign-"+r.id,onClick:function(){e.props.add_or_remove_campaign_callback(r.id)}},wp.element.createElement(u,{icon:"no-alt"})))))})(c)}}catch(e){r=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw i}}var p="campaign-loop";this.props.columns>1&&(p+=" campaign-grid campaign-grid-"+this.props.columns);var m=null;return t.length>0&&(m=1===t.length?wp.element.createElement("h2",null,l("Selected campaign","charitable")):wp.element.createElement("h2",null,l("Selected campaigns","charitable"))),wp.element.createElement("div",{className:"charitable-campaigns-list-card__selected-results-wrapper"},wp.element.createElement("div",{role:"menu",className:"charitable-campaigns-list-card__selected-results","aria-orientation":"vertical","aria-label":l("Selected campaigns","charitable")},m,wp.element.createElement("ul",{className:p},t)))}}]),t}(s)},function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=wp.i18n.__,c=wp.element.Component,p=wp,u=p.apiFetch,d=(function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedCategories:e.selected_categories,firstLoad:!0},n.checkboxChange=n.checkboxChange.bind(n),n.setFirstLoad=n.setFirstLoad.bind(n),n}o(t,e),l(t,[{key:"checkboxChange",value:function(e,t){var n=this.state.selectedCategories;if(n=n.filter(function(e){return!t.includes(e)}),e){var r;(r=n).push.apply(r,a(t))}this.setState({selectedCategories:n}),this.props.update_category_setting_callback(n)}},{key:"setFirstLoad",value:function(e){this.setState({firstLoad:!!e})}},{key:"render",value:function(){return wp.element.createElement("div",{className:"charitable-campaign-categories-list"},wp.element.createElement(d,{selectedCategories:this.state.selectedCategories,checkboxChange:this.checkboxChange,firstLoad:this.state.firstLoad,setFirstLoad:this.setFirstLoad}))}}])}(c),function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={categories:[],loaded:!1,query:""},n.updatePreview=n.updatePreview.bind(n),n.getQuery=n.getQuery.bind(n),n}return o(t,e),l(t,[{key:"componentDidMount",value:function(){this.getQuery()!==this.state.query&&this.updatePreview()}},{key:"componentDidUpdate",value:function(){this.getQuery()!==this.state.query&&this.state.loaded&&this.updatePreview()}},{key:"getQuery",value:function(){return"/wp/v2/campaignCategories"}},{key:"updatePreview",value:function(){var e=this,t=this.getQuery();e.setState({loaded:!1}),u({path:t}).then(function(n){e.setState({categories:n,loaded:!0,query:t})})}},{key:"render",value:function(){var e=this.props,t=e.selectedCategories,n=e.checkboxChange;if(!this.state.loaded)return s("Loading categories","charitable");if(0===this.state.categories.length)return s("No categories found","charitable");var r=function(e,t,a){var r=i(t,a).map(function(e){return e.slug});r.push(t.slug),n(e.target.checked,r)},i=function e(t,n){var r=[];return n.filter(function(e){return e.parent===t.id}).forEach(function(t){r.push(t),r.push.apply(r,a(e(t,n)))}),r},o=function(e){var n=e.categories,a=(e.parent,n);return a.length>0&&wp.element.createElement("ul",null,a.map(function(e){return wp.element.createElement("li",{key:e.id,className:"charitable-category-list-card__item"},wp.element.createElement("label",null,wp.element.createElement("input",{type:"checkbox",id:"campaign-category-"+e.slug,value:e.slug,checked:t.includes(e.slug),onChange:function(t){return r(t,e,n)}})," ",e.name,wp.element.createElement("span",{className:"charitable-category-list-card__taxonomy-count"},e.count)))}))},l=this.state.categories;return wp.element.createElement("div",{className:"charitable-category-list-card__results"},wp.element.createElement(o,{categories:l,parent:0}))}}]),t}(c))},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=(wp.i18n.__,wp.element.Component),s=wp.components.Dashicon;!function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={enabled:e.enabled},n}i(t,e),o(t,[{key:"render",value:function(){var e=this,t=function(){e.setState({enabled:!e.state.enabled})},n={},a="arrow-up-alt2";return this.state.enabled||(n.display="none",a="arrow-down-alt2"),wp.element.createElement("div",{className:"charitable-block-settings-filter"+(this.state.enabled?" is-opened":"")},wp.element.createElement("div",{className:"charitable-block-settings-filter-toggle"},wp.element.createElement("label",null,this.props.title,wp.element.createElement("button",{onClick:t,className:"charitable-block-settings-filter-toggle__accordion-button",type:"button"},wp.element.createElement(s,{icon:a})))),wp.element.createElement("div",{className:"charitable-block-settings-filter-settings",style:n},this.props.children))}}])}(l)},function(e,t,n){e.exports=n(5)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(6),n(9)},function(e,t,n){"use strict";var a=n(0),r=n(7),i=wp.i18n.__;(0,wp.blocks.registerBlockType)("charitable/campaigns",{title:i("Campaigns","charitable"),description:i("Display a list or grid of campaigns.","charitable"),category:"widgets",icon:a.a,keywords:[i("Fundraisers"),i("Charitable"),i("Donation")],attributes:{categories:{type:"array",default:[],items:{type:"string"}},includeInactive:{type:"boolean",default:!1},campaigns:{type:"array",default:[],items:{type:"number"}},campaignsToExclude:{type:"array",default:[],items:{type:"number"}},creator:{type:"string",default:""},order:{type:"string",default:"DESC"},orderBy:{type:"string",default:"post_date"},number:{type:"number",default:10},columns:{type:"number",default:2},masonryLayout:{type:"boolean",default:!1},responsiveLayout:{type:"boolean",default:!0},editMode:{type:"boolean",default:!1}},edit:function(e){return wp.element.createElement(r.a,e)},save:function(){return null}})},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=(n(0),n(8)),l=(n(1),n(2),n(3),function(){function e(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=wp.i18n.__,p=wp.element.Component,u=wp.components,d=u.Toolbar,m=u.ServerSideRender,h=u.PanelBody,f=u.PanelRow,b=u.SelectControl,g=u.ToggleControl,y=u.RangeControl,_=(u.Dashicon,wp.editor),v=_.InspectorControls,w=_.BlockControls,k=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={edit_mode:!1},e.updateEditMode=e.updateEditMode.bind(e),e.toggleMasonryLayout=e.toggleMasonryLayout.bind(e),e.toggleResponsiveLayout=e.toggleResponsiveLayout.bind(e),e.getInspectorControls=e.getInspectorControls.bind(e),e.getToolbarControls=e.getToolbarControls.bind(e),e.getSettingsEditor=e.getSettingsEditor.bind(e),e.getPreview=e.getPreview.bind(e),e}return i(t,e),s(t,[{key:"updateEditMode",value:function(){this.setState({edit_mode:!this.state.edit_mode})}},{key:"toggleMasonryLayout",value:function(){var e=this.props.attributes.masonryLayout;(0,this.props.setAttributes)({masonryLayout:!e})}},{key:"toggleResponsiveLayout",value:function(){var e=this.props.attributes.responsiveLayout;(0,this.props.setAttributes)({responsiveLayout:!e})}},{key:"getInspectorControls",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,a=t.number,r=t.orderBy,i=t.order,o=t.columns,s=t.masonryLayout,p=t.responsiveLayout;return wp.element.createElement(v,{key:"inspector",description:c("Configure","charitable")},wp.element.createElement(h,{title:c("Display Settings","charitable")},wp.element.createElement(f,null,wp.element.createElement(b,{key:"orderby-select",label:c("Order by","charitable"),value:r,options:[{label:c("Date created (newest to oldest)","charitable"),value:"post_date/DESC"},{label:c("Date created (oldest to newest)","charitable"),value:"post_date/ASC"},{label:c("Amount donated","charitable"),value:"popular/DESC"},{label:c("Time left (least first)","charitable"),value:"ending/DESC"},{label:c("Time left (longest first)","charitable"),value:"ending/ASC"}],onChange:function(e){var t=e.split("/"),a=l(t,2),o=a[0],s=a[1];s!==i&&n({order:s}),o!==r&&n({orderBy:o})}})),wp.element.createElement(f,null,wp.element.createElement(y,{key:"number-control",label:c("Number of campaigns","charitable"),value:a,onChange:function(e){return n({number:e})},min:"-1",max:"999"})),wp.element.createElement(f,null,wp.element.createElement(y,{key:"columns-select",label:c("Columns","charitable"),value:o,min:"1",max:"4",onChange:function(e){return n({columns:e})}})),wp.element.createElement(f,null,wp.element.createElement(g,{label:c("Masonry layout","charitable"),checked:s,onChange:this.toggleMasonryLayout})),wp.element.createElement(f,null,wp.element.createElement(g,{label:c("Responsive layout","charitable"),checked:p,onChange:this.toggleResponsiveLayout}))))}},{key:"getToolbarControls",value:function(){var e=this.props,t=e.attributes,n=(e.setAttributes,t.editMode,[{icon:"filter",title:c("Filter Campaigns","charitable"),onClick:this.updateEditMode,isActive:this.state.edit_mode}]);return wp.element.createElement(w,{key:"controls"},wp.element.createElement(d,{controls:n}))}},{key:"getSettingsEditor",value:function(){return wp.element.createElement(o.a,this.props)}},{key:"getPreview",value:function(){return wp.element.createElement("div",{class:"charitable-block-campaigns has-preview"},wp.element.createElement(m,{block:"charitable/campaigns",attributes:this.props.attributes}))}},{key:"render",value:function(){return[this.getInspectorControls(),this.getToolbarControls(),this.state.edit_mode?this.getSettingsEditor():this.getPreview()]}}]),t}(p);t.a=k},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return h});var o=n(0),l=n(1),s=(n(2),n(3),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),c=wp.i18n.__,p=wp.element.Component,u=wp.components,d=(u.Toolbar,u.ServerSideRender,u.PanelBody,u.PanelRow,u.SelectControl,u.ToggleControl),m=(u.RangeControl,u.Dashicon),h=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={display_option:"all",display_option_settings_open:!1},n.toggleIncludeInactive=n.toggleIncludeInactive.bind(n),n.closeDisplayOptionSettings=n.closeDisplayOptionSettings.bind(n),n.updateDisplayOption=n.updateDisplayOption.bind(n),n.getCurrentDisplayOption=n.getCurrentDisplayOption.bind(n),n.getCurrentView=n.getCurrentView.bind(n),n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props.attributes,t=e.campaigns,n=e.categories,a=e.creator,r="all";t.length?r="specific":(n.length||a.length)&&(r="filter"),this.setState({display_option:r})}},{key:"closeDisplayOptionSettings",value:function(){this.setState({display_option_settings_open:!1})}},{key:"toggleIncludeInactive",value:function(){var e=this.props,t=e.attributes;(0,e.setAttributes)({includeInactive:!t.includeInactive})}},{key:"updateDisplayOption",value:function(e){["all","filter","specific"].includes(e)&&this.setState({display_option:e,display_option_settings_open:!0})}},{key:"getCurrentDisplayOption",value:function(){var e=null;switch(this.state.display_option){case"all":e=c("All active campaigns","charitable");break;case"filter":e=c("Filtered campaigns","charitable");break;case"specific":e=c("Specific campaigns","charitable")}return e}},{key:"getCurrentView",value:function(){var e=this.props,t=e.attributes,n=(e.setAttributes,null);if(this.state.display_option_settings_open)switch(this.state.display_option){case"all":n=wp.element.createElement(y,{attributes:t,update_include_inactive_callback:this.toggleIncludeInactive});break;case"filter":n=wp.element.createElement(_,{attributes:t,update_include_inactive_callback:this.toggleIncludeInactive});break;case"specific":n=wp.element.createElement(g,{attributes:t})}else n=wp.element.createElement(f,{attributes:t,title:c("Filter campaigns","charitable"),selected_display_option:this.state.display_option,update_display_option_callback:this.updateDisplayOption});return n}},{key:"render",value:function(){var e=this.props,t=e.attributes,n=(e.setAttributes,t.categories,t.includeInactive,t.campaigns,t.campaignsToExclude,t.creator,t.columns,t.displayOption,null);return this.state.display_option_settings_open&&(n=wp.element.createElement("div",{className:"charitable-block-settings-breadcrumbs"},wp.element.createElement("a",{href:"#",onClick:this.closeDisplayOptionSettings},c("Display different campaigns","charitable")))),wp.element.createElement("div",{class:"charitable-block-settings charitable-block-settings-campaigns"},wp.element.createElement("div",{className:"charitable-block-settings-heading"},wp.element.createElement("h4",{className:"charitable-block-settings-title"},o.a," ",c("Campaigns","charitable"))),wp.element.createElement("div",{className:"charitable-block-settings-campaigns-subheading"},wp.element.createElement("p",null,wp.element.createElement("strong",null,c("Currently showing:","charitable"))," ",this.getCurrentDisplayOption())),n,this.getCurrentView())}}]),t}(p),f=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=(e.attributes,e.title),n=e.selected_display_option,a=e.update_display_option_callback,r=t.length?wp.element.createElement("p",{className:"charitable-block-settings-campaigns--display-options-header"},wp.element.createElement("strong",null,t)):"";return wp.element.createElement("div",{className:"charitable-block-settings-campaigns--display-options-wrapper"},r,wp.element.createElement("ul",{className:"charitable-block-settings-campaigns--display-options"},wp.element.createElement(b,{selected_display_option:n,update_display_option_callback:a,option:"all",label:c("Show all campaigns","charitable")}),wp.element.createElement(b,{selected_display_option:n,update_display_option_callback:a,option:"filter",label:c("Filter by category, tag or campaign creator","charitable")}),wp.element.createElement(b,{selected_display_option:n,update_display_option_callback:a,option:"specific",label:c("Choose specific campaigns","charitable")})))}}]),t}(p),b=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.option,n=e.label,a=e.selected_display_option,r=e.update_display_option_callback;return wp.element.createElement("li",{className:t===a?"active-option":"",onClick:function(){return r(t)}},t===a?wp.element.createElement(m,{icon:"yes"}):"",n,wp.element.createElement("button",{onClick:function(){return r(t)},className:"charitable-block-settings-campaigns--display-options-button",type:"button"},wp.element.createElement(m,{icon:"admin-generic"})))}}]),t}(p),g=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,a=t.campaigns,r=t.columns;return wp.element.createElement("div",{className:"charitable-block-settings-view charitable-block-settings-view--specific"},wp.element.createElement(l.a,{attributes:t,label:c("Choose campaigns","charitable"),selected_campaigns:a,update_campaign_setting_callback:function(e){return n({campaigns:e})},multiple:!0,columns:r}))}}]),t}(p),y=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,a=e.update_include_inactive_callback,r=t.campaignsToExclude,i=t.includeInactive;return wp.element.createElement("div",{className:"charitable-block-settings-view charitable-block-settings-view--all"},wp.element.createElement(d,{label:c("Include inactive campaigns","charitable"),checked:!!i,onChange:a}),wp.element.createElement(l.a,{attributes:t,label:c("Campaigns to exclude","charitable"),selected_campaigns:r,update_campaign_setting_callback:function(e){return n({campaignsToExclude:e})},multiple:"true"}))}}]),t}(p),_=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,a=t.campaigns,r=t.columns;return wp.element.createElement("div",{className:"charitable-block-settings-view charitable-block-settings-view--filter"},wp.element.createElement(l.a,{attributes:t,selected_campaigns:a,update_campaign_setting_callback:function(e){return n({campaigns:e})},multiple:!0,columns:r}))}}]),t}(p)},function(e,t,n){"use strict";var a=n(10),r=n(11),i=wp.i18n.__;(0,wp.blocks.registerBlockType)("charitable/donation-form",{title:i("Donation Form","charitable"),description:i("Display a campaign's donation form.","charitable"),category:"widgets",icon:r.a,keywords:[i("Donate","charitable"),i("Charitable")],attributes:{campaign:{type:"number",default:0}},transforms:{from:[{type:"shortcode",tag:"charitable_donation_form",attributes:{campaign:{type:"string",shortcode:function(e){var t=e.named.campaign_id,n=void 0===t?"":t;return n?parseInt(n,10):""}}}}]},edit:function(e){return wp.element.createElement(a.a,e)},save:function(e){return null}})},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=wp.i18n.__,c=wp.element.Component,p=wp.components,u=p.Toolbar,d=p.ServerSideRender,m=wp.editor.BlockControls,h=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={edit_mode:!e.props.attributes.campaign},e.getInspectorControls=e.getInspectorControls.bind(e),e.getToolbarControls=e.getToolbarControls.bind(e),e.getSettingsEditor=e.getSettingsEditor.bind(e),e.getPreview=e.getPreview.bind(e),e}return i(t,e),l(t,[{key:"getInspectorControls",value:function(){return""}},{key:"getToolbarControls",value:function(){var e=this,t=this.state.edit_mode,n=this.props,a=n.attributes,r=(n.setAttributes,a.campaign),i=[{icon:"edit",title:s("Edit"),onClick:r?function(){return e.setState({edit_mode:!t})}:function(){},isActive:this.state.edit_mode}];return wp.element.createElement(m,{key:"controls"},wp.element.createElement(u,{controls:i}))}},{key:"getSettingsEditor",value:function(){var e=this,t=this.props,n=t.attributes,a=t.setAttributes,r=n.campaign,i=r?[r]:[];return wp.element.createElement("div",{class:"charitable-block-donation-form charitable-block-settings"},wp.element.createElement(o.a,{attributes:n,selected_campaigns:i,update_campaign_setting_callback:function(t){a({campaign:t[0]}),e.setState({edit_mode:!t.length})},multiple:!1,campaign_active_status:"active"}))}},{key:"getPreview",value:function(){return wp.element.createElement("div",{class:"charitable-block-donation-form has-preview"},wp.element.createElement("div",{class:"charitable-block-overlay"}),wp.element.createElement(d,{block:"charitable/donation-form",attributes:this.props.attributes}))}},{key:"render",value:function(){return[this.getInspectorControls(),this.getToolbarControls(),this.state.edit_mode?this.getSettingsEditor():this.getPreview()]}}]),t}(c);t.a=h},function(e,t,n){"use strict";var a=wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",viewBox:"0 0 20 20"},wp.element.createElement("path",{d:"M17.69,2.31V5.69H2.31V2.31H17.69M20,0H0V8H20V0Z"}),wp.element.createElement("path",{d:"M17.69,8.31v3.38H2.31V8.31H17.69M20,6H0v8H20V6Z"}),wp.element.createElement("path",{d:"M17.69,14.31v3.38H2.31V14.31H17.69M20,12H0v8H20V12Z"}));t.a=a}]);