!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return v});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=wp.i18n.__,c=wp.element,p=c.Component,u=c.findDOMNode,d=(c.forwardRef,c.createRef,wp),m=d.apiFetch,h=wp.components,g=h.Dashicon,b=(h.TabbableContainer,h.NavigableMenu),f={},y=function(e){return e.hasOwnProperty("_embedded")&&e._embedded.hasOwnProperty("wp:featuredmedia")},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"thumbnail",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;return y(e)?wp.element.createElement("img",{src:e._embedded["wp:featuredmedia"][0].media_details.sizes[t].source_url,width:n,height:a}):""},v=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selected_campaigns:e.selected_campaigns||[]},n.addOrRemoveCampaign=n.addOrRemoveCampaign.bind(n),n}return o(t,e),l(t,[{key:"addOrRemoveCampaign",value:function(e){var t=this.state.selected_campaigns;t.includes(e)?t=t.filter(function(t){return t!==e}):this.props.multiple?t.push(e):t=[e],this.setState({selected_campaigns:t}),this.props.update_campaign_setting_callback(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.label,a=t.columns,r=t.campaign_active_status,i=n?wp.element.createElement("label",null,n):null;return wp.element.createElement("div",{className:"charitable-campaigns-field"},i,wp.element.createElement(w,{add_or_remove_campaign_callback:function(t){return e.addOrRemoveCampaign(t)},selected_campaigns:this.state.selected_campaigns,campaign_active_status:r}),wp.element.createElement(O,{selected_campaigns:this.state.selected_campaigns,add_or_remove_campaign_callback:function(t){return e.addOrRemoveCampaign(t)},columns:a,campaign_active_status:r}))}}]),t}(p),w=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={search_text:"",dropdown_open:!1},n.handleKeyDown=n.handleKeyDown.bind(n),n.updateSearchResults=n.updateSearchResults.bind(n),n.isDropdownOpen=n.isDropdownOpen.bind(n),n}return o(t,e),l(t,[{key:"isDropdownOpen",value:function(e){this.setState({dropdown_open:!!e})}},{key:"updateSearchResults",value:function(e){this.setState({search_text:e.target.value})}},{key:"handleKeyDown",value:function(e){if("ArrowDown"===e.key){e.stopPropagation();var t=u(1);void 0!==t&&t.focus()}}},{key:"render",value:function(){var e="charitable-campaigns-list-card__search-wrapper";return wp.element.createElement("div",{className:e+(this.state.dropdown_open?" "+e+"--with-results":"")},wp.element.createElement("div",{className:"charitable-campaigns-list-card__input-wrapper"},wp.element.createElement(g,{icon:"search"}),wp.element.createElement("input",{type:"search",className:"charitable-campaigns-list-card__search",value:this.state.search_text,placeholder:s("Search for campaigns to display","charitable"),tabIndex:"0",onChange:this.updateSearchResults})),wp.element.createElement(k,{search_string:this.state.search_text,add_or_remove_campaign_callback:this.props.add_or_remove_campaign_callback,selected_campaigns:this.props.selected_campaigns,is_dropdown_open_callback:this.isDropdownOpen,campaign_active_status:this.props.campaign_active_status}))}}]),t}(p),k=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={filtered:[],campaign_count:null,campaigns:[],query:"",loaded:!1,controllers:[]},n.getQuery=n.getQuery.bind(n),n.updateResults=n.updateResults.bind(n),n}return o(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;wp.apiFetch({path:"/wp/v2/campaigns?_embed&per_page=100&active_status="+this.props.campaign_active_status,parse:!1}).then(function(t){t.json().then(function(n){e.setState({campaigns:n,loaded:!0,campaign_count:t.headers.get("X-WP-Total")}),e.updateResults()})})}},{key:"componentDidUpdate",value:function(){this.props.search_string!==this.state.query&&this.updateResults()}},{key:"getQuery",value:function(){return this.props.search_string.length?"/wp/v2/campaigns?_embed&per_page=10&search="+this.props.search_string:""}},{key:"updateResults",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.state.loaded){if(e<25)return e+=1,window.setTimeout(this.updateResults,500,e);this.setState({loaded:!0})}var t=this.props.search_string,n=t.toLowerCase(),a=this.state.campaigns.filter(function(e){return e.title.rendered.toLowerCase().includes(n)});this.setState({query:t,filtered:a})}},{key:"render",value:function(){if(!this.state.loaded||!this.state.query.length)return null;if(0===this.state.filtered.length)return wp.element.createElement("span",{className:"charitable-campaign-list-card__search-no-results"}," ",s("No campaigns found")," ");var e=!0,t=!1,n=void 0;try{for(var a,r=this.state.filtered[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var i=a.value;f[i.id]=i}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}return wp.element.createElement(E,{campaigns:this.state.filtered,add_or_remove_campaign_callback:this.props.add_or_remove_campaign_callback,selected_campaigns:this.props.selected_campaigns,is_dropdown_open_callback:this.props.is_dropdown_open_callback})}}]),t}(p),E=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.is_dropdown_open_callback(!0)}},{key:"componentDidUnmount",value:function(){this.props.is_dropdown_open_callback(!1)}},{key:"render",value:function(){var e,t=this.props,n=t.campaigns,r=t.add_or_remove_campaign_callback,i=t.selected_campaigns,o=[],l=0,c=!0,p=!1,u=void 0;try{for(var d,m=n[Symbol.iterator]();!(c=(d=m.next()).done);c=!0){var h=d.value;o.push(wp.element.createElement(C,{index:l,campaign:h,add_or_remove_campaign_callback:r,selected:i.includes(h.id)})),l+=1}}catch(e){p=!0,u=e}finally{try{!c&&m.return&&m.return()}finally{if(p)throw u}}return wp.element.createElement(b,(e={onNavigate:function(e){return console.log(e)},className:"my-class-name"},a(e,"className","charitable-campaigns-list-card__search-results"),a(e,"aria-label",s("Campaign list","charitable")),e),o)}}]),t}(p),C=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=n.handleClick.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n}return o(t,e),l(t,[{key:"handleClick",value:function(){this.props.add_or_remove_campaign_callback(this.props.campaign.id)}},{key:"handleKeyDown",value:function(e){if("ArrowDown"===e.key){e.stopPropagation();var t=u(this.props.index+1);t&&t.focus()}}},{key:"render",value:function(){var e=this,t=this.props.campaign,n=this.props.selected?wp.element.createElement(g,{icon:"yes"}):null,a=0===this.props.index?a:"";return wp.element.createElement("div",{className:function(t){var n="charitable-campaigns-list-card__content";return e.props.selected&&(n+=" charitable-campaigns-list-card__content--added"),y(t)&&(n+=" charitable-campaigns-list-card__content--has-thumbnail"),n}(t),onClick:this.handleClick,isDefault:!0},_(t),wp.element.createElement("span",{className:"charitable-campaigns-list-card__content-item-name"},t.title.rendered),n)}}]),t}(p),O=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={query:"",loaded:!1},n.getQuery=n.getQuery.bind(n),n.updateCampaignCache=n.updateCampaignCache.bind(n),n}return o(t,e),l(t,[{key:"componentDidMount",value:function(){this.updateCampaignCache()}},{key:"componentDidUpdate",value:function(){this.state.loaded&&this.getQuery()!==this.state.query&&this.updateCampaignCache()}},{key:"getQuery",value:function(){if(!this.props.selected_campaigns.length)return"";var e=[],t=!0,n=!1,a=void 0;try{for(var r,i=this.props.selected_campaigns[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;f.hasOwnProperty(o)||e.push(o)}}catch(e){n=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw a}}return e.length?"/wp/v2/campaigns?_embed&include="+e.join(","):""}},{key:"updateCampaignCache",value:function(){var e=this,t=this.getQuery();e.setState({query:t,loaded:!1}),t.length&&m({path:t}).then(function(t){if(t.length){var n=!0,a=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value;f[l.id]=l}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}console.log(t),e.setState({loaded:!0})})}},{key:"render",value:function(){var e=this.props,t=e.selected_campaigns,n=e.add_or_remove_campaign_callback,a=[],r=!0,i=!1,o=void 0;try{for(var l,c=t[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var p=l.value;(function(e){if(!f.hasOwnProperty(e))return"continue";var t=f[e];a.push(wp.element.createElement("li",{className:"charitable-campaigns-list-card__item campaign",key:t.id+"-specific-select-edit"},wp.element.createElement("div",{className:"charitable-campaigns-list-card__content"},_(t),wp.element.createElement("span",{className:"charitable-campaigns-list-card__content-item-name"},t.title.rendered),wp.element.createElement("button",{type:"button",id:"campaign-"+t.id,onClick:function(){n(t.id)}},wp.element.createElement(g,{icon:"no-alt"})))))})(p)}}catch(e){i=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}var u=null;t.length>0&&(u=1===t.length?wp.element.createElement("h2",null,s("Selected campaign","charitable")):wp.element.createElement("h2",null,s("Selected campaigns","charitable")));var d=a.length?a:s("Loading...","charitable");return wp.element.createElement("div",{className:"charitable-campaigns-list-card__selected-results-wrapper"},wp.element.createElement("div",{role:"menu",className:"charitable-campaigns-list-card__selected-results","aria-orientation":"vertical","aria-label":s("Selected campaigns","charitable")},u,wp.element.createElement("ul",{className:"charitable-campaigns-list-card__selected-results-list"},d)))}}]),t}(p)},function(e,t,n){"use strict";var a=wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",viewBox:"0 0 20 20"},wp.element.createElement("path",{d:"M18.9,1.1V18.9H1.1V1.1H18.9M20,0H0V20H20V0Z"}),wp.element.createElement("rect",{width:"20",height:"9"}),wp.element.createElement("rect",{x:"3",y:"11",width:"11",height:"2"}),wp.element.createElement("rect",{x:"3",y:"15",width:"14",height:"2"}));t.a=a},function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=wp.i18n.__,c=wp.element.Component,p=wp,u=p.apiFetch,d=(function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedCategories:e.selected_categories,firstLoad:!0},n.checkboxChange=n.checkboxChange.bind(n),n.setFirstLoad=n.setFirstLoad.bind(n),n}o(t,e),l(t,[{key:"checkboxChange",value:function(e,t){var n=this.state.selectedCategories;if(n=n.filter(function(e){return!t.includes(e)}),e){var r;(r=n).push.apply(r,a(t))}this.setState({selectedCategories:n}),this.props.update_category_setting_callback(n)}},{key:"setFirstLoad",value:function(e){this.setState({firstLoad:!!e})}},{key:"render",value:function(){return wp.element.createElement("div",{className:"charitable-campaign-categories-list"},wp.element.createElement(d,{selectedCategories:this.state.selectedCategories,checkboxChange:this.checkboxChange,firstLoad:this.state.firstLoad,setFirstLoad:this.setFirstLoad}))}}])}(c),function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={categories:[],loaded:!1,query:""},n.updatePreview=n.updatePreview.bind(n),n.getQuery=n.getQuery.bind(n),n}return o(t,e),l(t,[{key:"componentDidMount",value:function(){this.getQuery()!==this.state.query&&this.updatePreview()}},{key:"componentDidUpdate",value:function(){this.getQuery()!==this.state.query&&this.state.loaded&&this.updatePreview()}},{key:"getQuery",value:function(){return"/wp/v2/campaignCategories"}},{key:"updatePreview",value:function(){var e=this,t=this.getQuery();e.setState({loaded:!1}),u({path:t}).then(function(n){e.setState({categories:n,loaded:!0,query:t})})}},{key:"render",value:function(){var e=this.props,t=e.selectedCategories,n=e.checkboxChange;if(!this.state.loaded)return s("Loading categories","charitable");if(0===this.state.categories.length)return s("No categories found","charitable");var r=function(e,t,a){var r=i(t,a).map(function(e){return e.slug});r.push(t.slug),n(e.target.checked,r)},i=function e(t,n){var r=[];return n.filter(function(e){return e.parent===t.id}).forEach(function(t){r.push(t),r.push.apply(r,a(e(t,n)))}),r},o=function(e){var n=e.categories,a=(e.parent,n);return a.length>0&&wp.element.createElement("ul",null,a.map(function(e){return wp.element.createElement("li",{key:e.id,className:"charitable-category-list-card__item"},wp.element.createElement("label",null,wp.element.createElement("input",{type:"checkbox",id:"campaign-category-"+e.slug,value:e.slug,checked:t.includes(e.slug),onChange:function(t){return r(t,e,n)}})," ",e.name,wp.element.createElement("span",{className:"charitable-category-list-card__taxonomy-count"},e.count)))}))},l=this.state.categories;return wp.element.createElement("div",{className:"charitable-category-list-card__results"},wp.element.createElement(o,{categories:l,parent:0}))}}]),t}(c))},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=(wp.i18n.__,wp.element.Component),s=wp.components.Dashicon;!function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={enabled:e.enabled},n}i(t,e),o(t,[{key:"render",value:function(){var e=this,t=function(){e.setState({enabled:!e.state.enabled})},n={},a="arrow-up-alt2";return this.state.enabled||(n.display="none",a="arrow-down-alt2"),wp.element.createElement("div",{className:"charitable-block-settings-filter"+(this.state.enabled?" is-opened":"")},wp.element.createElement("div",{className:"charitable-block-settings-filter-toggle"},wp.element.createElement("label",null,this.props.title,wp.element.createElement("button",{onClick:t,className:"charitable-block-settings-filter-toggle__accordion-button",type:"button"},wp.element.createElement(s,{icon:a})))),wp.element.createElement("div",{className:"charitable-block-settings-filter-settings",style:n},this.props.children))}}])}(l)},function(e,t,n){e.exports=n(5)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(6),n(9),n(12)},function(e,t,n){"use strict";var a=n(1),r=n(7),i=wp.i18n.__;(0,wp.blocks.registerBlockType)("charitable/campaigns",{title:i("Campaigns","charitable"),description:i("Display a list or grid of campaigns.","charitable"),category:"widgets",icon:a.a,keywords:[i("Fundraisers"),i("Charitable"),i("Donation")],attributes:{categories:{type:"array",default:[],items:{type:"string"}},includeInactive:{type:"boolean",default:!1},campaigns:{type:"array",default:[],items:{type:"number"}},campaignsToExclude:{type:"array",default:[],items:{type:"number"}},creator:{type:"string",default:""},order:{type:"string",default:"DESC"},orderBy:{type:"string",default:"post_date"},number:{type:"number",default:10},columns:{type:"number",default:2},masonryLayout:{type:"boolean",default:!1},responsiveLayout:{type:"boolean",default:!0}},edit:function(e){return wp.element.createElement(r.a,e)},save:function(){return null}})},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=(n(1),n(8)),l=(n(0),n(2),n(3),function(){function e(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=wp.i18n.__,p=wp.element.Component,u=wp.components,d=u.Toolbar,m=u.ServerSideRender,h=u.PanelBody,g=u.PanelRow,b=u.SelectControl,f=u.ToggleControl,y=u.RangeControl,_=(u.Dashicon,wp.editor),v=_.InspectorControls,w=_.BlockControls,k=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={edit_mode:!1},e.updateEditMode=e.updateEditMode.bind(e),e.toggleMasonryLayout=e.toggleMasonryLayout.bind(e),e.toggleResponsiveLayout=e.toggleResponsiveLayout.bind(e),e.getInspectorControls=e.getInspectorControls.bind(e),e.getToolbarControls=e.getToolbarControls.bind(e),e.getSettingsEditor=e.getSettingsEditor.bind(e),e.getPreview=e.getPreview.bind(e),e}return i(t,e),s(t,[{key:"updateEditMode",value:function(){this.setState({edit_mode:!this.state.edit_mode})}},{key:"toggleMasonryLayout",value:function(){var e=this.props.attributes.masonryLayout;(0,this.props.setAttributes)({masonryLayout:!e})}},{key:"toggleResponsiveLayout",value:function(){var e=this.props.attributes.responsiveLayout;(0,this.props.setAttributes)({responsiveLayout:!e})}},{key:"getInspectorControls",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,a=t.number,r=t.orderBy,i=t.order,o=t.columns,s=t.masonryLayout,p=t.responsiveLayout;return wp.element.createElement(v,{key:"inspector",description:c("Configure","charitable")},wp.element.createElement(h,{title:c("Display Settings","charitable")},wp.element.createElement(g,null,wp.element.createElement(b,{key:"orderby-select",label:c("Order by","charitable"),value:r,options:[{label:c("Date created (newest to oldest)","charitable"),value:"post_date/DESC"},{label:c("Date created (oldest to newest)","charitable"),value:"post_date/ASC"},{label:c("Amount donated","charitable"),value:"popular/DESC"},{label:c("Time left (least first)","charitable"),value:"ending/DESC"},{label:c("Time left (longest first)","charitable"),value:"ending/ASC"}],onChange:function(e){var t=e.split("/"),a=l(t,2),o=a[0],s=a[1];s!==i&&n({order:s}),o!==r&&n({orderBy:o})}})),wp.element.createElement(g,null,wp.element.createElement(y,{key:"number-control",label:c("Number of campaigns","charitable"),value:a,onChange:function(e){return n({number:e})},min:"-1",max:"999"})),wp.element.createElement(g,null,wp.element.createElement(y,{key:"columns-select",label:c("Columns","charitable"),value:o,min:"1",max:"4",onChange:function(e){return n({columns:e})}})),wp.element.createElement(g,null,wp.element.createElement(f,{label:c("Masonry layout","charitable"),checked:s,onChange:this.toggleMasonryLayout})),wp.element.createElement(g,null,wp.element.createElement(f,{label:c("Responsive layout","charitable"),checked:p,onChange:this.toggleResponsiveLayout}))))}},{key:"getToolbarControls",value:function(){var e=[{icon:"filter",title:c("Filter Campaigns","charitable"),onClick:this.updateEditMode,isActive:this.state.edit_mode}];return wp.element.createElement(w,{key:"controls"},wp.element.createElement(d,{controls:e}))}},{key:"getSettingsEditor",value:function(){return wp.element.createElement(o.a,this.props)}},{key:"getPreview",value:function(){return wp.element.createElement("div",{class:"charitable-block-campaigns has-preview"},wp.element.createElement(m,{block:"charitable/campaigns",attributes:this.props.attributes}))}},{key:"render",value:function(){return[this.getInspectorControls(),this.getToolbarControls(),this.state.edit_mode?this.getSettingsEditor():this.getPreview()]}}]),t}(p);t.a=k},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return h});var o=n(1),l=n(0),s=(n(2),n(3),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),c=wp.i18n.__,p=wp.element.Component,u=wp.components,d=(u.Toolbar,u.ServerSideRender,u.PanelBody,u.PanelRow,u.SelectControl,u.ToggleControl),m=(u.RangeControl,u.Dashicon),h=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={display_option:"all",display_option_settings_open:!1},n.toggleIncludeInactive=n.toggleIncludeInactive.bind(n),n.closeDisplayOptionSettings=n.closeDisplayOptionSettings.bind(n),n.updateDisplayOption=n.updateDisplayOption.bind(n),n.getCurrentDisplayOption=n.getCurrentDisplayOption.bind(n),n.getCurrentView=n.getCurrentView.bind(n),n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props.attributes,t=e.campaigns,n=e.categories,a=e.creator,r="all";t.length?r="specific":(n.length||a.length)&&(r="filter"),this.setState({display_option:r})}},{key:"closeDisplayOptionSettings",value:function(){this.setState({display_option_settings_open:!1})}},{key:"toggleIncludeInactive",value:function(){var e=this.props,t=e.attributes;(0,e.setAttributes)({includeInactive:!t.includeInactive})}},{key:"updateDisplayOption",value:function(e){var t=this.props,n=(t.attributes,t.setAttributes);if(["all","filter","specific"].includes(e))switch(this.setState({display_option:e,display_option_settings_open:!0}),e){case"all":n({categories:[],campaigns:[],creator:""});break;case"filter":n({campaigns:[]});break;case"specific":n({categories:[],campaignsToExclude:[],creator:"",includeInactive:!0})}}},{key:"getCurrentDisplayOption",value:function(){var e=null;switch(this.state.display_option){case"all":e=c("All active campaigns","charitable");break;case"filter":e=c("Filtered campaigns","charitable");break;case"specific":e=c("Specific campaigns","charitable")}return e}},{key:"getCurrentView",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,a=null;if(this.state.display_option_settings_open)switch(this.state.display_option){case"all":a=wp.element.createElement(y,{setAttributes:n,attributes:t,update_include_inactive_callback:this.toggleIncludeInactive});break;case"filter":a=wp.element.createElement(_,{setAttributes:n,attributes:t,update_include_inactive_callback:this.toggleIncludeInactive});break;case"specific":a=wp.element.createElement(f,{setAttributes:n,attributes:t})}else a=wp.element.createElement(g,{attributes:t,title:c("Filter campaigns","charitable"),selected_display_option:this.state.display_option,update_display_option_callback:this.updateDisplayOption});return a}},{key:"render",value:function(){var e=this.props,t=e.attributes,n=(e.setAttributes,t.categories,t.includeInactive,t.campaigns,t.campaignsToExclude,t.creator,t.columns,t.displayOption,null);return this.state.display_option_settings_open&&(n=wp.element.createElement("div",{className:"charitable-block-settings-breadcrumbs"},wp.element.createElement("a",{href:"#",onClick:this.closeDisplayOptionSettings},c("Display different campaigns","charitable")))),wp.element.createElement("div",{class:"charitable-block-settings charitable-block-settings-campaigns"},wp.element.createElement("div",{className:"charitable-block-settings-heading"},wp.element.createElement("h4",{className:"charitable-block-settings-title"},o.a," ",c("Campaigns","charitable"))),wp.element.createElement("div",{className:"charitable-block-settings-campaigns-subheading"},wp.element.createElement("p",null,wp.element.createElement("strong",null,c("Currently showing:","charitable"))," ",this.getCurrentDisplayOption())),n,this.getCurrentView())}}]),t}(p),g=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.selected_display_option,a=e.update_display_option_callback,r=t.length?wp.element.createElement("p",{className:"charitable-block-settings-campaigns--display-options-header"},wp.element.createElement("strong",null,t)):"";return wp.element.createElement("div",{className:"charitable-block-settings-campaigns--display-options-wrapper"},r,wp.element.createElement("ul",{className:"charitable-block-settings-campaigns--display-options"},wp.element.createElement(b,{selected_display_option:n,update_display_option_callback:a,option:"all",label:c("Show all campaigns","charitable")}),wp.element.createElement(b,{selected_display_option:n,update_display_option_callback:a,option:"filter",label:c("Filter by category, tag or campaign creator","charitable")}),wp.element.createElement(b,{selected_display_option:n,update_display_option_callback:a,option:"specific",label:c("Choose specific campaigns","charitable")})))}}]),t}(p),b=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.option,n=e.label,a=e.selected_display_option,r=e.update_display_option_callback;return wp.element.createElement("li",{className:t===a?"active-option":"",onClick:function(){return r(t)}},t===a?wp.element.createElement(m,{icon:"yes"}):"",n,wp.element.createElement("button",{onClick:function(){return r(t)},className:"charitable-block-settings-campaigns--display-options-button",type:"button"},wp.element.createElement(m,{icon:"admin-generic"})))}}]),t}(p),f=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,a=t.campaigns,r=t.columns;return wp.element.createElement("div",{className:"charitable-block-settings-view charitable-block-settings-view--specific"},wp.element.createElement(l.a,{attributes:t,label:c("Choose campaigns","charitable"),selected_campaigns:a,update_campaign_setting_callback:function(e){return n({campaigns:e})},multiple:!0,columns:r,campaign_active_status:""}))}}]),t}(p),y=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,a=e.update_include_inactive_callback,r=t.campaignsToExclude,i=t.includeInactive;return wp.element.createElement("div",{className:"charitable-block-settings-view charitable-block-settings-view--all"},wp.element.createElement(d,{label:c("Include inactive campaigns","charitable"),checked:!!i,onChange:a}),wp.element.createElement(l.a,{attributes:t,label:c("Campaigns to exclude","charitable"),selected_campaigns:r,update_campaign_setting_callback:function(e){return n({campaignsToExclude:e})},multiple:"true",campaign_active_status:""}))}}]),t}(p),_=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,a=t.campaigns,r=t.columns;return wp.element.createElement("div",{className:"charitable-block-settings-view charitable-block-settings-view--filter"},wp.element.createElement(l.a,{attributes:t,selected_campaigns:a,update_campaign_setting_callback:function(e){return n({campaigns:e})},multiple:!0,columns:r}))}}]),t}(p)},function(e,t,n){"use strict";var a=n(10),r=n(11),i=wp.i18n.__;(0,wp.blocks.registerBlockType)("charitable/donation-form",{title:i("Donation Form","charitable"),description:i("Display a campaign's donation form.","charitable"),category:"widgets",icon:r.a,keywords:[i("Donate","charitable"),i("Charitable")],attributes:{campaign:{type:"number",default:0}},transforms:{from:[{type:"shortcode",tag:"charitable_donation_form",attributes:{campaign:{type:"string",shortcode:function(e){var t=e.named.campaign_id,n=void 0===t?"":t;return n?parseInt(n,10):""}}}}]},edit:function(e){return wp.element.createElement(a.a,e)},save:function(e){return null}})},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=wp.i18n.__,c=wp.element.Component,p=wp.components,u=p.Toolbar,d=p.ServerSideRender,m=wp.editor.BlockControls,h=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={edit_mode:!e.props.attributes.campaign},e.getInspectorControls=e.getInspectorControls.bind(e),e.getToolbarControls=e.getToolbarControls.bind(e),e.getSettingsEditor=e.getSettingsEditor.bind(e),e.getPreview=e.getPreview.bind(e),e}return i(t,e),l(t,[{key:"getInspectorControls",value:function(){return""}},{key:"getToolbarControls",value:function(){var e=this,t=this.state.edit_mode,n=this.props,a=n.attributes,r=(n.setAttributes,a.campaign),i=[{icon:"edit",title:s("Edit"),onClick:r?function(){return e.setState({edit_mode:!t})}:function(){},isActive:this.state.edit_mode}];return wp.element.createElement(m,{key:"controls"},wp.element.createElement(u,{controls:i}))}},{key:"getSettingsEditor",value:function(){var e=this,t=this.props,n=t.attributes,a=t.setAttributes,r=n.campaign,i=r?[r]:[];return wp.element.createElement("div",{class:"charitable-block-donation-form charitable-block-settings"},wp.element.createElement(o.a,{attributes:n,selected_campaigns:i,update_campaign_setting_callback:function(t){a({campaign:t[0]}),e.setState({edit_mode:!t.length})},multiple:!1,campaign_active_status:"active"}))}},{key:"getPreview",value:function(){return wp.element.createElement("div",{class:"charitable-block-donation-form has-preview"},wp.element.createElement("div",{class:"charitable-block-overlay"}),wp.element.createElement(d,{block:"charitable/donation-form",attributes:this.props.attributes}))}},{key:"render",value:function(){return[this.getInspectorControls(),this.getToolbarControls(),this.state.edit_mode?this.getSettingsEditor():this.getPreview()]}}]),t}(c);t.a=h},function(e,t,n){"use strict";var a=wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",viewBox:"0 0 20 20"},wp.element.createElement("path",{d:"M17.69,2.31V5.69H2.31V2.31H17.69M20,0H0V8H20V0Z"}),wp.element.createElement("path",{d:"M17.69,8.31v3.38H2.31V8.31H17.69M20,6H0v8H20V6Z"}),wp.element.createElement("path",{d:"M17.69,14.31v3.38H2.31V14.31H17.69M20,12H0v8H20V12Z"}));t.a=a},function(e,t,n){"use strict";var a=n(13),r=n(14),i=wp.i18n.__;(0,wp.blocks.registerBlockType)("charitable/donors",{title:i("Donors"),category:"widgets",icon:a.a,keywords:[i("Donations"),i("Charitable"),i("Backer")],edit:r.a,save:function(){return wp.element.createElement("p",null,i("DONORS"))}})},function(e,t,n){"use strict";var a=wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",viewBox:"0 0 20 20"},wp.element.createElement("path",{d:"M0,0V20H20V0ZM10,3A3,3,0,1,1,7,6,3,3,0,0,1,10,3Zm5,14H5V12.89A2.89,2.89,0,0,1,7.89,10h4.22A2.89,2.89,0,0,1,15,12.89Z"}));t.a=a},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(0),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=wp.i18n.__,c=wp.element.Component,p=wp.blocks.InspectorControls,u=wp.components,d=u.PanelBody,m=u.PanelRow,h=u.SelectControl,g=u.ToggleControl,b=u.RangeControl,f=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.toggleDisplayDonorName=e.toggleDisplayDonorName.bind(e),e.toggleDisplayDonorAmount=e.toggleDisplayDonorAmount.bind(e),e.toggleDisplayDonorLocation=e.toggleDisplayDonorLocation.bind(e),e.toggleDisplayDonorAvatar=e.toggleDisplayDonorAvatar.bind(e),e.toggleDistinctDonors=e.toggleDistinctDonors.bind(e),e}return i(t,e),l(t,[{key:"toggleDisplayDonorName",value:function(){var e=this.props.attributes.displayDonorName;(0,this.props.setAttributes)({displayDonorName:!e})}},{key:"toggleDisplayDonorLocation",value:function(){var e=this.props.attributes.displayDonorLocation;(0,this.props.setAttributes)({displayDonorLocation:!e})}},{key:"toggleDisplayDonorAvatar",value:function(){var e=this.props.attributes.displayDonorAvatar;(0,this.props.setAttributes)({displayDonorAvatar:!e})}},{key:"toggleDisplayDonorAmount",value:function(){var e=this.props.attributes.displayDonorAmount;(0,this.props.setAttributes)({displayDonorAmount:!e})}},{key:"toggleDistinctDonors",value:function(){var e=this.props.attributes.distinctDonors;(0,this.props.setAttributes)({distinctDonors:!e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.attributes,a=t.isSelected,r=t.setAttributes,i=n.number,l=n.orderBy,c=n.campaign,u=n.distinctDonors,f=n.orientation,y=n.displayDonorAmount,_=n.displayDonorName,v=n.displayDonorLocation,w=n.displayDonorAvatar;return[a&&wp.element.createElement(p,{key:"inspector",description:s("Configure")},wp.element.createElement(b,{key:"number-control",label:s("Number of donors"),value:i,onChange:function(e){return r({number:e})},min:"-1",max:"999"}),wp.element.createElement(o.default,{key:"campaign-select",label:s("Campaign"),withOptions:[{label:s("All Campaigns"),value:"all"}],selectedOption:c,onChange:function(t){return e.props.setAttributes({campaign:t})}}),wp.element.createElement(h,{key:"orderby-select",label:s("Order by"),value:l,options:[{label:s("Most recent"),value:"recent"},{label:s("Amount donated"),value:"amount"}],onChange:function(e){return r({orderBy:e})}}),wp.element.createElement(g,{key:"distinct-donors-toggle",label:s("Only show unique donors"),checked:u,onChange:this.toggleDistinctDonors}),wp.element.createElement(d,{title:s("Display Settings")},wp.element.createElement(m,null,wp.element.createElement(h,{key:"orientation-select",label:s("Orientation"),value:f,options:[{label:s("Vertical"),value:"vertical"},{label:s("Horizontal"),value:"horizontal"}],onChange:function(e){return r({orientation:e})}})),wp.element.createElement(m,null,wp.element.createElement(g,{label:s("Display the name of the donor"),checked:_,onChange:this.toggleDisplayDonorName})),wp.element.createElement(m,null,wp.element.createElement(g,{label:s("Display the amount donated by the donor"),checked:y,onChange:this.toggleDisplayDonorAmount})),wp.element.createElement(m,null,wp.element.createElement(g,{label:s("Display the location of the donor"),checked:v,onChange:this.toggleDisplayDonorLocation})),wp.element.createElement(m,null,wp.element.createElement(g,{label:s("Display the avatar of the donor"),checked:w,onChange:this.toggleDisplayDonorAvatar})))),wp.element.createElement("p",{key:"charitable-donors"},s("DONORS"))]}}]),t}(c);t.a=f}]);